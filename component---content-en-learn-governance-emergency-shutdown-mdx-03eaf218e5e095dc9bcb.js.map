{"version":3,"sources":["webpack:///./content/en/learn/governance/emergency-shutdown.mdx","webpack:///./src/modules/layouts/mdx_layout.js"],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","isMDXComponent","children","pageContext","uri","frontmatter","title","description","keywords","featuredImage","status","hideLanguageSelector","hideBreadcrumbs","statusProps","text","currentTopSection","useLocation","pathname","split","hasTopSection","undefined","seo","firstHeading","Children","toArray","find","c","getFirstHeading","pop","sx","marginTop","sticky","width","justifyContent","position","alignItems","flexWrap","px","lineHeight","maxWidth","mb"],"mappings":"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","file":"component---content-en-learn-governance-emergency-shutdown-mdx-03eaf218e5e095dc9bcb.js","sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/community-portal/community-portal/src/modules/layouts/mdx_layout.js\";\nexport const _frontmatter = {};\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1>{`Emergency Shutdown`}</h1>\n    <p>{`The Emergency Shutdown Module (ESM) is a contract with the ability to call End.cage() to trigger the Shutdown of the Maker Protocol.`}</p>\n    <p>{`Emergency Shutdown stops and settles the Maker Protocol while ensuring that Dai holders and Vault users receive the net value of assets they are entitled to.`}</p>\n    <p><img parentName=\"p\" {...{\n        \"src\": \"https://lh6.googleusercontent.com/tHGq8IsHybndRILRSF_pkAObTOPrcylSnBdN4DC7LDudq2EeH0K8Q9qEZgrQG-ozBtjwCWZtWPBbp-_tSnlP75nXRWcSMb4FzZsjCZvZBAPavGkJcsaoYDwIehDqE_6tlqp8KH3Y\",\n        \"alt\": null\n      }}></img></p>\n    <h2>{`Purpose`}</h2>\n    <p>{`Emergency Shutdown is intended to be triggered in the case of a system upgrade or serious emergencies, such as long-term market irrationality, a hack, or a security breach.`}</p>\n    <p>{`When triggered, Emergency Shutdown stops and shuts down the Maker Protocol while ensuring that all users, both Dai holders, and Vault users, receive the net value of assets they are entitled to under the Protocolâ€™s smart contract logic.`}</p>\n    <p>{`However, the value of Collateral that Dai holders can redeem may vary, depending on the system surplus or deficit at the time of Emergency Shutdown. It is, therefore, possible that Dai holders will receive less or more than 1 USD worth of Collateral for 1 Dai.`}</p>\n    <h3>{`Prioritizing Vault Owners`}</h3>\n    <p>{`The Maker Protocol currently prioritizes Vault Owners over Dai Holders because:`}</p>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Overcollateralized Vaults do not subsidize the Maker Protocol for undercollateralized Vaults during the current operation of the system, so it's consistent for Emergency Shutdown to have the same behavior. The main difference is that a potential haircut is transferred from MKR holders to DAI holders, as no assumptions can be made about the value of MKR after a shutdown.`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Giving priority to Vault owners to recover their excess Collateral (if their Vault is not undercollateralized) incentivizes them to maintain overcollateralization. This is important because the incentive remains even if an Emergency Shutdown seems likely, which ultimately makes the Protocol more resilient.`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Stability fees accrued pre-Emergency Shutdown are not waived by Emergency Shutdown. Vault owners may accept higher fees if they know they are protected from the collateralization levels of others, potentially resulting in a higher surplus during Emergency Shutdown scenarios as well as allowing for a higher Dai Savings Rate during normal operation.`}</p>\n      </li>\n    </ul>\n    <h2>{`Initiating Shutdown`}</h2>\n    <p>{`The process of initiating Emergency Shutdown is decentralized and controlled by MKR voters, who can trigger it by depositing MKR into the Emergency Shutdown Module.`}</p>\n    <p>{`50,000 MKR must be deposited into the Emergency Shutdown Module to trigger an Emergency Shutdown. Once users deposit MKR into the Emergency Shutdown Module, it is immediately burned.`}</p>\n    <p>{`Emergency Shutdown may or may not be initiated with a Redeployment Scenario to allow users to open new Vaults and have a new Dai token while claiming Collateral from the old system.`}</p>\n    <h2>{`Shutdown Conditions`}</h2>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Dai no-race condition: Every Dai holder will be able to redeem the same relative quantity of collateral proportional to their Dai holdings, regardless of when they interact with the contract.`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Vault Parity: Vault Owners are prioritized, allowing them to withdraw their excess Collateral before Dai holders are able to access Collateral.`}</p>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`At the time of Emergency Shutdown, individual Vaults, entire collateral types, or the Maker Protocol can be undercollateralized, which is when the value of debt exceeds the value of the Collateral (\"negative equity\"). Thus, the value of Collateral that Dai holders can redeem may vary, depending on the system surplus or deficit at the time of Emergency Shutdown. It is, therefore, possible that Dai holders will receive less or more than 1 USD worth of Collateral for 1 Dai.`}</li>\n        </ul>\n      </li>\n    </ul>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Immediate Vault redemption: After Emergency Shutdown is initiated, Vault owners are allowed to free their Collateral immediately, provided that they execute all contract calls atomically.`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`No off-chain calculations: The system does not require the cage authority to supply any off-chain calculated values (i.e., it can rely entirely on the last OSM feed prices).`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Vow Buffer Assistance: After Emergency Shutdown is initiated, any surplus or bad debt in the buffer acts as a reward or penalty distributed pro-rata to all Dai holders. For example, if 10% of total system debt is in the form of net surplus in the Vow, then Dai holders receive 10% more Collateral.`}</p>\n      </li>\n    </ul>\n    <h2>{`Collateral Distribution`}</h2>\n    <h3>{`Auction Settlement`}</h3>\n    <p>{`The Emergency Shutdown Module includes a time delay to be determined by governance. The delay must expire before any exchange of Dai for Collateral can take place.`}</p>\n    <p>{`The general guidance is that the delay should be long enough to ensure all auctions either finish or get skipped but there is no guarantee of this in the code.`}</p>\n    <h3>{`For Vault Owners`}</h3>\n    <p>{`Vault owners can retrieve excess collateral from their Vaults immediately after the initialization of Emergency Shutdown.`}</p>\n    <p>{`This can be achieved using Vault frontends like `}<a parentName=\"p\" {...{\n        \"href\": \"https://oasis.app/borrow\"\n      }}>{`Oasis Borrow`}</a>{` that have Emergency Shutdown support implemented as well as via the command-line.`}</p>\n    <h3>{`For Dai Holders`}</h3>\n    <p>{`Dai holders can, after a waiting period determined by MKR voters, swap their Dai for a relative share of all types of collateral in the system. The Maker Foundation will initially offer a web page for this purpose.`}</p>\n    <p>{`To claim Dai:`}</p>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`If your wallet has the viable interface to claim collateral or migrate your Dai, or it has a Dapp browser built into it, you may use the `}<a parentName=\"p\" {...{\n            \"href\": \"https://migrate.makerdao.com/\"\n          }}>{`migration portal`}</a>{` to claim collateral and/or migrate.`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`If your wallet does not support the above functionality, you must transfer your Dai to a new wallet that enables the functionality before proceeding to use the migration portal.`}</p>\n      </li>\n    </ul>\n    <p>{`Dai holders always receive the same relative amount of collateral from the system, whether they are among the first or last people to process their claims.`}</p>\n    <p>{`Dai holders may also sell their Dai to Keepers (if available) to avoid self-management of the different collateral types in the system.`}</p>\n    <h2>{`More Information`}</h2>\n    <p>{`For technical information about the Shutdown of the Maker Protocol, please see the `}<a parentName=\"p\" {...{\n        \"href\": \"/learn/vaults/vaults-tutorial#emergency-shutdown-module/\"\n      }}>{`Emergency Shutdown Module Documentation`}</a>{`.`}</p>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Contract Name: esm.sol`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><a parentName=\"p\" {...{\n            \"href\": \"/learn/vaults/vaults-tutorial#emergency-shutdown-module/\"\n          }}>{`Associated MCD System Diagram`}</a></p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><a parentName=\"p\" {...{\n            \"href\": \"https://github.com/makerdao/esm/blob/master/src/ESM.sol\"\n          }}>{`Contract Source`}</a></p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><a parentName=\"p\" {...{\n            \"href\": \"https://etherscan.io/address/0x0581a0abe32aae9b5f0f68defab77c6759100085\"\n          }}>{`Etherscan`}</a></p>\n      </li>\n    </ul>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      ","/** @jsx jsx */\nimport {Children, Fragment} from 'react';\nimport { Box, Flex, jsx } from \"theme-ui\";\nimport Sticky from \"react-sticky-el\";\nimport { useLocation } from \"@reach/router\";\n\nimport { LanguageSelector } from \"@modules/localization\";\nimport { Sidenav, Breadcrumbs } from \"@modules/navigation\";\nimport { StatusBanner } from \"@modules/ui\";\nimport { SEO } from \"@modules/utility\";\n\n\nexport default (props) => {\n  const { children, pageContext, uri } = props;\n  const {\n    title,\n    description,\n    keywords,\n    featuredImage,\n    status,\n    hideLanguageSelector,\n    hideBreadcrumbs,\n  } = pageContext.frontmatter;\n\n  const statusProps =\n    typeof status === \"object\"\n      ? { children: status.text, ...status }\n      : { children: status };\n\n  const { pathname } = useLocation();\n  const path = pathname.split(\"/\");\n  const currentTopSection = path[2];\n\n  //For the sake of SEO we may want the page title to be based on the first h1 in our MDX file.\n  //if no title is specified in the metadata.\n  const getFirstHeading = () => {\n    //NOTE(Rejon): The children of layouts provided are MDX components!\n    //Find the first mdx child that's an H1\n    const firstHeading = Children.toArray(children).find(\n      (c) => c.props.mdxType === \"h1\"\n    );\n\n    //If we have an h1 in our file return it.\n    if (firstHeading !== undefined) {\n      return firstHeading.props.children;\n    }\n\n    return undefined;\n  };\n\n  //SEO page title priority is: frontmatter title -> First H1 in mdx -> Filename fallback from uri\n  //NOTE(Rejon): If the page is an index of a directory, the uri split will be the name of the directory. ie. /en/bounties -> bounties\n  const _pageTitle = title || getFirstHeading() || uri.split(\"/\").pop();\n\n  const hasTopSection =\n    currentTopSection !== undefined && currentTopSection !== \"\";\n\n  const seo = {\n    title: _pageTitle,\n    description,\n    keywords,\n    featuredImage,\n  };\n\n  return (\n    <Fragment>\n      <SEO {...seo} />\n      \n      {status && (\n        <Box sx={{ marginTop: hasTopSection ? 2 : 0 }}>\n          <StatusBanner sticky {...statusProps} sx={{ width: \"100%\" }} />\n        </Box>\n      )}\n          {(!hideBreadcrumbs || (hasTopSection && !hideLanguageSelector)) && (\n            <Flex\n              sx={{\n                justifyContent: \"space-between\",\n                position: \"relative\",\n                alignItems: \"flex-start\",\n                flexWrap: [\"wrap\", \"wrap\", \"unset\"],\n                px: !hasTopSection ? [3, 3, 0] : 0,\n              }}\n            >\n              {!hideBreadcrumbs && <Breadcrumbs />}\n              {hasTopSection && !hideLanguageSelector && <LanguageSelector />}\n            </Flex>\n          )}\n          <Box\n            sx={\n              hasTopSection && !hideLanguageSelector\n                ? {\n                    \"& > *:nth-of-type(1)\": {\n                      lineHeight: \"normal\",\n                    },\n                    \"& > *:nth-of-type(1), & > *:nth-of-type(2)\": {\n                      maxWidth: [\"100%\", \"100%\", \"calc(100% - 234px - 1rem)\"],\n                    },\n                    \"& > *:nth-of-type(2)\": { mb: \"32px\" },\n                  }\n                : {}\n            }\n          >\n            {children}\n          </Box>\n    </Fragment>\n  );\n};\n"],"sourceRoot":""}