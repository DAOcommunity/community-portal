{"version":3,"sources":["webpack:///./content/en/makerdao-mcd-faqs/oracles.md","webpack:///./src/modules/layouts/mdx_layout.js"],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","isMDXComponent","useTranslation","locale","t","DEFAULT_LOCALE","allMdx","useStaticQuery","children","pageContext","uri","pagePath","frontmatter","title","description","keywords","featuredImage","status","hideLanguageSelector","hideBreadcrumbs","pathDirs","replace","split","slice","urlNoLocale","join","calculateTreeData","edges","sidenavData","breadcrumbData","languageSelectorData","filter","node","UrlConverter","getLocaleFromPath","fileAbsolutePath","map","value","label","statusProps","text","currentTopSection","useLocation","pathname","_pageTitle","firstHeading","Children","toArray","find","c","undefined","getFirstHeading","pop","hasTopSection","renderSidenav","hideSidenav","renderLanguageSelector","renderBreadcrumbs","seo","contentWidthSubtract","sx","width","display","boundaryElement","dontUpdateHolderHeightWhenSticky","style","position","hideOnBoundaryHit","data","currentPath","as","mt","pl","pr","pb","marginTop","sticky","justifyContent","alignItems","flexWrap","px"],"mappings":"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","file":"component---content-en-makerdao-mcd-faqs-oracles-md-b0757419b343ed9597b9.js","sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/community-portal/community-portal/src/modules/layouts/mdx_layout.js\";\nexport const _frontmatter = {};\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1>{`Oracles`}</h1>\n    <h2>{`What is an Oracle?`}</h2>\n    <p>{`An Oracle makes both off-chain and on-chain data available for use in smart-contracts. In the Maker Protocol, Oracles enable the use of price data of various assets to determine a number of important things like when to `}<a parentName=\"p\" {...{\n        \"href\": \"liquidation.md\"\n      }}>{`Liquidate`}</a>{` a `}<a parentName=\"p\" {...{\n        \"href\": \"vault.md\"\n      }}>{`Vault`}</a>{` or how much Dai a given Vault can generate. MakerDAO Oracles receive data from a number of independent Feeds that consist of individuals and organizations. Each Oracle corresponds to a single asset and its reference price.`}</p>\n    <h2>{`How does the Oracle system work?`}</h2>\n    <p>{`In the Maker Protocol, each collateral type has a corresponding Oracle that publishes a reference price that the system uses. Each Oracle consists of an `}<a parentName=\"p\" {...{\n        \"href\": \"https://docs.makerdao.com/smart-contract-modules/oracle-module/oracle-security-module-osm-detailed-documentation\"\n      }}>{`Oracle Security Module`}</a>{` and a `}<a parentName=\"p\" {...{\n        \"href\": \"https://docs.makerdao.com/smart-contract-modules/oracle-module/median-detailed-documentation\"\n      }}>{`Medianizer`}</a>{`. The Medianizer is sent data through a system of Feeds and relayers.`}</p>\n    <p>{`Each Feed uses a tool called `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/makerdao/setzer-mcd\"\n      }}>{`Setzer`}</a>{` which pulls the median price from a set of exchanges and then pushes it to a `}<a parentName=\"p\" {...{\n        \"href\": \"https://scuttlebot.io/more/protocols/secure-scuttlebutt.html\"\n      }}>{`Secure Scuttlebut Network`}</a>{` that has relayers reading from it. Relayers aggregate the price data and send a transaction to the Medianizer. The Medianizer then takes the median of the multiple reported medians and publishes it as a queued reference price. This price is then delayed by the Oracle Security Module before it is finally used by the system.`}</p>\n    <p>{`Feeds may configure Setzer to pull from any exchanges of their choosing. Relayers are able to configure parameters around when to push price data to the Medianizer. Only MKR `}<a parentName=\"p\" {...{\n        \"href\": \"governance.md\"\n      }}>{`governance`}</a>{` can configure or change the Medianizer and Oracle Security Module.`}</p>\n    <h2>{`How is the Oracle system made secure?`}</h2>\n    <p>{`To defend against fraudulent price-data, the reporting is decentralized; there are multiple organizations and individuals who report price-data, they are called Feeds. At the launch of Multi-Collateral Dai, Oracles received data from a total of 20 Feeds which consisted of 15 individuals and five public organizations. The Oracles use the median of the reported prices for each asset as the reference price. Using a median instead of an average makes it harder to manipulate the reference price since control over half of the data providers is needed in order for a fraudulent price to be pushed through. Additionally, using a median naturally filters out irregular price data.`}</p>\n    <p>{`In addition to this, the `}<a parentName=\"p\" {...{\n        \"href\": \"https://docs.makerdao.com/smart-contract-modules/oracle-module/oracle-security-module-osm-detailed-documentation\"\n      }}>{`Oracle Security Module(OSM)`}</a>{` safeguards the process by delaying price-feed data for one hour. This allows MKR governors and other stakeholders the time to identify bugs or attacks on the price-feed system. An OSM is active on all Oracles in the Maker Protocol.`}</p>\n    <h2>{`What is an Oracle Security Module?`}</h2>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"https://docs.makerdao.com/smart-contract-modules/oracle-module/oracle-security-module-osm-detailed-documentation\"\n      }}>{`Oracle Security Modules(OSMs)`}</a>{` delay the publishing of new reference prices for a predefined set of time. This parameter is called the `}<inlineCode parentName=\"p\">{`Oracle Security Module Delay`}</inlineCode>{` and was set to be one hour at the launch of MCD. This allows MKR token holders and other stakeholders the time to react to bugs or attacks on the Oracles. An OSM is active on each Oracle in the Maker Protocol.`}</p>\n    <h2>{`Can MakerDAO governance change the time of the Oracle Security Module’s delay?`}</h2>\n    <p>{`Yes. This parameter is called the `}<inlineCode parentName=\"p\">{`Oracle Security Module Delay`}</inlineCode>{` and can be adjusted by MKR token holders.`}</p>\n    <h2>{`What is a Medianizer?`}</h2>\n    <p>{`A `}<a parentName=\"p\" {...{\n        \"href\": \"https://docs.makerdao.com/smart-contract-modules/oracle-module/median-detailed-documentation\"\n      }}>{`Medianizer`}</a>{` is a type of smart-contract in the Maker Protocol’s Oracle system that collects price-data from Feeds and calculates a reference price by calculating a median. The Medianizer maintains a white-list of Feeds that can be controlled by MakerDAO `}<a parentName=\"p\" {...{\n        \"href\": \"governance.md\"\n      }}>{`governance.`}</a>{` Every time a new set of price updates is received, the reference price is recalculated and queued into the Oracle Security Module which publishes the price after a delay period.`}</p>\n    <h2>{`How often does the Medianizer publish an updated reference price?`}</h2>\n    <p>{`Each time a relayer pushes a new set of medians to a `}<a parentName=\"p\" {...{\n        \"href\": \"https://docs.makerdao.com/smart-contract-modules/oracle-module/median-detailed-documentation\"\n      }}>{`Medianizer`}</a>{`, it recalculates the median and updates the queued reference price in the `}<a parentName=\"p\" {...{\n        \"href\": \"https://docs.makerdao.com/smart-contract-modules/oracle-module/oracle-security-module-osm-detailed-documentation\"\n      }}>{`Oracle Security Module(OSM)`}</a>{`. The OSM applies a time-delay and acts as the final publisher of the reference price.`}</p>\n    <h2>{`What is a Secure Scuttlebut Network?`}</h2>\n    <p>{`Secure Scuttlebutt is a database protocol for unforgeable append-only message feeds. For more information on how a Secure Scuttlebut Network works visit this `}<a parentName=\"p\" {...{\n        \"href\": \"https://scuttlebot.io/more/protocols/secure-scuttlebutt.html\"\n      }}>{`informative page`}</a>{` on `}<a parentName=\"p\" {...{\n        \"href\": \"https://scuttlebot.io/\"\n      }}>{`scuttlebot.io`}</a>{`.`}</p>\n    <h2>{`Why are Oracles an attack target for malicious actors?`}</h2>\n    <p>{`In the Maker Protocol, if the reference price for an asset was determined by a single party, then they could fraudulently report an incorrect price and cause severe issues. For instance, if the price of ETH was reported to be fraudulently low, say $0.01, then every single ETH `}<a parentName=\"p\" {...{\n        \"href\": \"vault.md\"\n      }}>{`Vault`}</a>{` in the system would be `}<a parentName=\"p\" {...{\n        \"href\": \"liquidation.md\"\n      }}>{`Liquidated`}</a>{`. On the other hand, if the price of ETH was reported to be artificially high, say $1,000,000.00, then any ETH Vault owner would be able to issue an excessive amount of Dai since the system thinks there is more Collateral value than there actually is. Oracle attacks can be very profitable for a successful attacker and can be very disruptive to MakerDAO and its users.`}</p>\n    <h2>{`Who are the Feeds?`}</h2>\n    <p>{`The Feeds are a mix of pseudonymous individuals and public organizations. Individuals consist of people internal to Maker, influential people in the greater crypto community, as well as some community members. The organizations involved in being Feeds at the launch of MCD can be found in the ratified `}<a parentName=\"p\" {...{\n        \"href\": \"https://vote.makerdao.com/polling-proposal/qmpem83sxjjwe1jvn2csdtetn4r3j95ejuzpbmtxef4lu5\"\n      }}>{`DeFi Feeds proposal`}</a>{`.`}</p>\n    <h2>{`Why are organizational Feeds public, while individual Feeds are pseudonymous?`}</h2>\n    <p>{`From their onset, the individuals running Feeds have been pseudonymous out of necessity, to protect the individuals from the risk of extortion and blackmail. Pseudonymous Feeds also have the benefit of making it harder to coordinate an Oracle attack since the Feeds don’t know who the others are. Organizations running Feeds, however, are different. Organizations are much more resilient against coercion, have the resources to combat malicious actors, and have their reputations at stake. This makes them much better equipped to be Feeds with public identities. A hybrid model is optimal, one that incorporates the benefits of both individual and organizational Feeds.`}</p>\n    <h2>{`What is the process for becoming a Feed?`}</h2>\n    <p>{`All new Feeds go through MakerDAO’s `}<a parentName=\"p\" {...{\n        \"href\": \"governance.md\"\n      }}>{`governance`}</a>{` in order to be added in. There is currently no formal way for Feeds to be added to the Maker Protocol. As of October 07th, 2019, the ratified `}<a parentName=\"p\" {...{\n        \"href\": \"https://vote.makerdao.com/polling-proposal/qmas1bqrquo2h41qv4fa8hpek9ukb7dlwtpkpn62r5hhmq\"\n      }}>{`Oracle Team Mandate`}</a>{` grants the Interim Oracle Team the responsibility of being the intermediary between the Feeds and governance. In the coming months, the process of becoming a Feed will become more clear.`}</p>\n    <h2>{`Is the Oracle system resistant to Sybil attacks?`}</h2>\n    <p>{`To quote from Wikipedia's page on `}<a parentName=\"p\" {...{\n        \"href\": \"https://en.wikipedia.org/wiki/Sybil_attack\"\n      }}>{`Sybil Attacks`}</a>{`, \"In a Sybil attack, the attacker subverts the reputation system of a peer-to-peer network by creating a large number of pseudonymous identities, using them to gain a disproportionately large influence. A reputation system's vulnerability to a Sybil attack depends on how cheaply identities can be generated, the degree to which the reputation system accepts inputs from entities that do not have a chain of trust linking them to a trusted entity, and whether the reputation system treats all entities identically.\"`}</p>\n    <p>{`The short answer is yes, the Oracle system is resistant to Sybil attacks because of the existence of a whitelist for Feeds. It's not simple to become a Feed, they need to be approved by MKR `}<a parentName=\"p\" {...{\n        \"href\": \"governance.md\"\n      }}>{`governance.`}</a>{` Therefore, an attacker cannot gain a majority influence by creating many pseudo-feeds.`}</p>\n    <h2>{`What happens if there is a flash crash on an exchange?`}</h2>\n    <p>{`Since the reference price published by the Oracles is a median of the median prices that are reported by at least 20 different Feeds, outliers are automatically filtered out. In practice, this means if a single exchange experiences a flash crash the set of prices will look something like this:`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`[0.70, 104.80, 104.82, **104.88**, 104.90, 105.02, 105.04]\n`}</code></pre>\n    <p>{`The median of this set still reflects the real market price of the asset. Flash crashes on single exchanges do not affect the published reference price.`}</p>\n    <h2>{`Where can I find more technical information about Oracles?`}</h2>\n    <p>{`Visit our `}<a parentName=\"p\" {...{\n        \"href\": \"https://docs.makerdao.com/\"\n      }}>{`Documentation Portal`}</a>{` for all technical documentation of the Maker Protocol. Technical documentation of Oracles can be found in the `}<a parentName=\"p\" {...{\n        \"href\": \"https://docs.makerdao.com/smart-contract-modules/oracle-module\"\n      }}>{`Oracle Module`}</a>{` section of our Documentation Portal.`}</p>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      ","/** @jsx jsx */\nimport {Children, Fragment} from 'react';\nimport { Box, Flex, jsx } from \"theme-ui\";\nimport Sticky from \"react-sticky-el\";\nimport { useStaticQuery, graphql } from \"gatsby\";\nimport { useLocation } from \"@reach/router\";\n\nimport {MobileNav} from '@modules/navigation';\nimport { useTranslation } from \"@modules/localization/\";\nimport { LanguageSelector } from \"@modules/localization\";\nimport { Sidenav, Breadcrumbs } from \"@modules/navigation\";\nimport { StatusBanner } from \"@modules/ui\";\nimport calculateTreeData from \"@modules/navigation/calculateTreeData\";\nimport { SEO } from \"@modules/utility\";\nimport { UrlConverter, getLocaleFromPath } from \"@utils\";\n\nexport default (props) => {\n  const { locale, t, DEFAULT_LOCALE } = useTranslation();\n\n  const { allMdx } = useStaticQuery(graphql`\n    query getMDXData {\n      # Regex for all files that are NOT config files\n      allMdx(\n        filter: {\n          fileAbsolutePath: {\n            regex: \"//([\\\\\\\\w]{2})/(?!header.mdx|index.mdx|sidenav.mdx|example.mdx|social.mdx|footer.mdx|404.mdx|.js|.json)/\"\n          }\n        }\n      ) {\n        edges {\n          node {\n            headings(depth: h1) {\n              value\n            }\n            fileAbsolutePath\n            frontmatter {\n              title\n              order\n            }\n          }\n        }\n      }\n    }\n  `);\n\n  const { children, pageContext, uri } = props;\n\n  const {pagePath} = pageContext; \n  const {\n    title,\n    description,\n    keywords,\n    featuredImage,\n    status,\n    hideLanguageSelector,\n    hideBreadcrumbs,\n  } = pageContext.frontmatter;\n\n  const pathDirs = pagePath.replace(/^\\/|\\/$/g, \"\").split(\"/\").slice(1);\n  const urlNoLocale = pathDirs.join(\"/\");\n  \n  const { sidenavData, breadcrumbData } = calculateTreeData(\n    allMdx.edges,\n    pathDirs[0],\n    DEFAULT_LOCALE,\n    locale,\n    pathDirs\n  );\n\n  //NOTE(Rejon): Must be in the shape that React Select expects for it's options.\n  //Something that can be queried? \n  const languageSelectorData = allMdx.edges\n    .filter(({ node }) => {\n      //Drop the end slash, remove the locale, compare the string\n      //TODO(Rejon): This works for now, but can probably be optimized with a Regex solution.\n      const nodeURL = UrlConverter(node)\n        .replace(/^\\/|\\/$/g, \"\")\n        .split(\"/\")\n        .slice(1)\n        .join(\"/\");\n\n      return (\n        nodeURL === urlNoLocale &&\n        getLocaleFromPath(node.fileAbsolutePath) !== locale\n      );\n    })\n    .map(({ node }) => ({\n      value: UrlConverter(node),\n      label: t(\n        \"Language\",\n        null,\n        null,\n        getLocaleFromPath(node.fileAbsolutePath)\n      ),\n    }));\n\n  const statusProps =\n    typeof status === \"object\"\n      ? { children: status.text, ...status }\n      : { children: status };\n\n  const { pathname } = useLocation();\n  const path = pathname.split(\"/\");\n  const currentTopSection = path[2];\n\n  //For the sake of SEO we may want the page title to be based on the first h1 in our MDX file.\n  //if no title is specified in the metadata.\n  const getFirstHeading = () => {\n    //NOTE(Rejon): The children of layouts provided are MDX components!\n    //Find the first mdx child that's an H1\n    const firstHeading = Children.toArray(children).find(\n      (c) => c.props.mdxType === \"h1\"\n    );\n\n    //If we have an h1 in our file return it.\n    if (firstHeading !== undefined) {\n      return firstHeading.props.children;\n    }\n\n    return undefined;\n  };\n\n  //SEO page title priority is: frontmatter title -> First H1 in mdx -> Filename fallback from uri\n  //NOTE(Rejon): If the page is an index of a directory, the uri split will be the name of the directory. ie. /en/bounties -> bounties\n  const _pageTitle = title || getFirstHeading() || uri.split(\"/\").pop();\n\n  const hasTopSection =\n    currentTopSection !== undefined && currentTopSection !== \"\";\n\n  const renderSidenav = pageContext.frontmatter && !pageContext.frontmatter.hideSidenav && hasTopSection;\n  const renderLanguageSelector = hasTopSection && !hideLanguageSelector;\n  const renderBreadcrumbs = (!hideBreadcrumbs || (hasTopSection && !hideLanguageSelector));\n\n  const seo = {\n    title: _pageTitle,\n    description,\n    keywords,\n    featuredImage,\n  };\n\n  let contentWidthSubtract = renderLanguageSelector ? 234 : 0; //NOTE(Rejon): Based on word from design, language selector being hidden doesn't change content width.\n\n  if (renderSidenav) {\n    contentWidthSubtract += 256;\n  }\n\n\n  return (\n    <Fragment>\n      {renderSidenav\n          &&\n          <Box\n            sx={{\n              width: \"256px\",\n              display: [\"none\", \"none\", \"initial\"],\n            }}\n          >\n          <Sticky\n            boundaryElement=\".content-boundary\"\n            dontUpdateHolderHeightWhenSticky={true}\n            style={{ position: \"relative\" }}\n            hideOnBoundaryHit={false}\n            sx={{display: [\"none\", \"none\", \"initial\"]}}\n          >\n            <Sidenav data={sidenavData} currentPath={pagePath}/>\n          </Sticky>\n        </Box>\n      }\n      <Box as=\"article\" sx={{\n        width: ['100%', '100%', `calc(100% - ${contentWidthSubtract}px)`],\n        mt: hasTopSection ? [4, 4, \"59px\"] : 0,\n        pl: hasTopSection ? [4, 4, \"64px\"] : 0,\n        pr: hasTopSection ? [4, 4, 0] : 0,\n        pb: 4,\n        \n      }}>\n      <SEO {...seo} />\n      \n      {status && (\n        <Box sx={{ marginTop: hasTopSection ? 2 : 0 }}>\n          <StatusBanner sticky {...statusProps} sx={{ width: \"100%\" }} />\n        </Box>\n      )}\n      {renderBreadcrumbs && \n        <Flex\n          sx={{\n            justifyContent: \"space-between\",\n            position: \"relative\",\n            alignItems: \"flex-start\",\n            flexWrap: [\"wrap\", \"wrap\", \"unset\"],\n            px: !hasTopSection ? [3, 3, 0] : 0,\n          }}\n        >\n          <Breadcrumbs data={breadcrumbData} pathDirs={pathDirs}/>\n        </Flex>\n      }\n      <Box sx={{display: ['block', 'block', 'none']}}>\n        {/* MOBILE LANGUAGE SELECTOR */}\n        {renderLanguageSelector && <LanguageSelector data={languageSelectorData} pagePath={pagePath}/>}\n      </Box>\n      <Box>\n        {children}\n      </Box>\n      </Box>\n      \n      <Box sx={{display: ['none', 'none', 'block']}}>\n        {/* DESKTOP LANGUAGE SELECTOR */}\n        {renderLanguageSelector && <LanguageSelector data={languageSelectorData} pagePath={pagePath}/>}\n      </Box>\n      <MobileNav sidenavData={sidenavData}/>\n    </Fragment>\n  );\n};\n"],"sourceRoot":""}