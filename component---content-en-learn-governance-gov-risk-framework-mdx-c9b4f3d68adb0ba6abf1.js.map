{"version":3,"sources":["webpack:///./content/en/learn/governance/gov-risk-framework.mdx","webpack:///./src/modules/layouts/mdx_layout.js"],"names":["_frontmatter","makeShortcode","name","props","console","warn","List","Box","Button","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","mdxType","parentName","to","isMDXComponent","useTranslation","locale","t","DEFAULT_LOCALE","allMdx","useStaticQuery","children","pageContext","uri","pagePath","frontmatter","title","description","keywords","featuredImage","status","hideLanguageSelector","hideBreadcrumbs","pathDirs","replace","split","slice","urlNoLocale","join","calculateTreeData","edges","sidenavData","breadcrumbData","languageSelectorData","filter","node","UrlConverter","getLocaleFromPath","fileAbsolutePath","map","value","label","statusProps","text","currentTopSection","useLocation","pathname","_pageTitle","firstHeading","Children","toArray","find","c","undefined","getFirstHeading","pop","hasTopSection","renderSidenav","hideSidenav","renderLanguageSelector","renderBreadcrumbs","seo","contentWidthSubtract","sx","width","display","boundaryElement","dontUpdateHolderHeightWhenSticky","style","position","hideOnBoundaryHit","data","currentPath","as","mt","pl","pr","pb","marginTop","sticky","justifyContent","alignItems","flexWrap","px"],"mappings":"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","file":"component---content-en-learn-governance-gov-risk-framework-mdx-c9b4f3d68adb0ba6abf1.js","sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/community-portal/community-portal/src/modules/layouts/mdx_layout.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst List = makeShortcode(\"List\");\nconst Box = makeShortcode(\"Box\");\nconst Button = makeShortcode(\"Button\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1>{`Governance Risk Framework (Part 1)`}</h1>\n    <h4>{`This section describes the risk management in Maker and the role of Maker token holders in managing it.`}</h4>\n    <p>{`The goal of governance is to establish the effective processes for protecting the integrity and stability of the Maker system. We aim to achieve that goal by building a decentralized, open, scientific risk management community.`}</p>\n    <h2>{`Introduction`}</h2>\n    <p>{`This section is divided into three parts. `}</p>\n    <p>{`The first will define what a stablecoin is and classify different types. It will then introduce the concept of ‘decentralized risk management’. `}</p>\n    <p>{`The second part of the section will address how decentralized risk management is initiated and implemented by the first risk team, a template model team, the internal risk team of the Maker Foundation. `}</p>\n    <p>{`The last part puts it all together for Maker token holders, by mapping out the decisions that Maker holders will need to make, the support that Maker holders will get to make those decisions and the voting process to follow to manage the risk function. It is the objective of this series to gain an understanding of the risk management function and the contribution Maker token holders make in managing it.`}</p>\n    <h2>{`Stablecoins`}</h2>\n    <p>{`Stablecoins are crypto-assets that aim to maintain value relative to a specific asset or basket of assets.`}</p>\n    <p>{`The stability implied in the name is created through a mechanism of dynamics that attempt to keep the value of the token steady with some given reference point. `}</p>\n    <p>{`In most instances, that reference point is the United States dollar but could be extended to any other asset (Euro) or index (CPI).`}</p>\n    <h3>{`Types of Stablecoins`}</h3>\n    <p>{`Currently, three mechanisms or types of stablecoin have transpired that attempt to implement this:`}</p>\n    <List mdxType=\"List\">\n      <Box mdxType=\"Box\">\n        <h4>{`IOU`}</h4>\n        <p>{`The IOU organization is asking the user to place their trust in the traditional centralized system;give them an asset (usually a $1), they will keep it with a centralized custodian and will provide you with a token in return. If you want your asset back, give them the token and the centralized custodian will give you your asset back. The user explicitly trusts that the custodian will look after its assets.`}</p>\n      </Box>\n      <Box mdxType=\"Box\">\n        <h4>{`Seigniorage Shares`}</h4>\n        <p>{`Seigniorage share or Algorithm-based stablecoin solutions ask the user to place their trust with them. If the price of the token is too high, they will increase the supply and reduce demand. If the price is too low, they will increase demand and lower supply. The user explicitly trusts that they, or the mechanisms deployed by the organization, will respond in a timely and appropriate fashion to keep the system and by definition their token stable.`}</p>\n      </Box>\n      <Box mdxType=\"Box\">\n        <h4>{`Collateralized`}</h4>\n        <p>{`Collateralized organizations ask the user to place their trust in the value created by the blockchain. If the user believes that the economy of the blockchain will flourish then so will the tokens on the blockchain. Those tokens are then used to collateralize the supply of stable coin into that economy. Regardless of the governing dynamics used for stability, users place their trust first and foremost into the pledged collateral before anything else.`}</p>\n      </Box>\n    </List>\n    <p>{`The most significant difference between these solutions is where you place your trust as a user and, by extension, how you define the character of that stablecoin.`}</p>\n    <h3>{`Dai - A Collateralized Stablecoin`}</h3>\n    <p>{`Maker allows users to place their trust in distributed ledger technology through the value proposition of the Dai stablecoin. `}</p>\n    <p>{`Dai is supplied to the Ethereum blockchain economy by way of a lending mechanism, whereby a user borrows Dai and increases supply through on-chain transactions. `}</p>\n    <p>{`To facilitate this lending, Maker has created a smart contract called a Collateralized Debt Position (CDP). `}</p>\n    <p>{`The purpose of the CDP is two-fold; to accept pledged collateral tokens and to make a Dai credit facility available. Put another way, it provides loans and attempts to mitigate credit risk at the same time.`}</p>\n    <h4>{`Collateralized Debt Position - The Engine of Supply`}</h4>\n    <p>{`A Collateralized Debt Position (CDP) is a smart contract designed to minimize credit risk and facilitate collateralization.`}</p>\n    <p>{`Credit or counterparty risk is the risk that a borrower will default on their debt. To mitigate the risk associated with borrowers defaulting, lenders ask for recourse in the form of collateral to be paid before borrowing money.`}</p>\n    <p>{`Collateralization is a fundamental tool used throughout the traditional finance space to minimize or mitigate credit risk. Collateralization occurs when a borrower pledges an asset as recourse to the lender in the event of default on that loan.`}</p>\n    <h4>{`Pledge-of-Assets and Event-of-Default`}</h4>\n    <p>{`A CDP encapsulates these two ideas and turns the fundamental notion of a credit facility into a Dai supplying mechanism.`}</p>\n    <p>{`Assets pledged as collateral need to be unencumbered and accessible to the lender, meaning the lender can take possession and store the collateral somewhere in the event it needs to be seized. `}</p>\n    <p>{`There is an industry dedicated to this process of pledging assets, ensuring they remain unencumbered, and warehousing them appropriately. This is all done in almost an instant with a CDP.`}</p>\n    <p>{`Defining \"Event-of-Default,\" recognizing when it happens, and taking the appropriate action is again an industry in the traditional space. The CDP makes this a well established and almost instant event to which we can identify and react.`}</p>\n    <h2>{`Governance and Decentralized Risk Management`}</h2>\n    <p>{`What assets do we use as collateral and how do we define a default event?`}</p>\n    <p>{`Ultimately, we would like to answer these questions through a myriad of competing risk constructs from a multitude of risk teams.`}</p>\n    <p>{`The combination of these teams through competition and cooperative structures, which forms the basis for the Decentralized Risk Management function.`}</p>\n    <h3>{`The Goal of Risk Governance`}</h3>\n    <p>{`The goal of governance is to establish the most effective way to protect the integrity and stability of the Maker system.`}</p>\n    <p>{`The community is initially being guided by the `}<a parentName=\"p\" {...{\n        \"href\": \"/learn/MakerDAO/maker-foundation/\"\n      }}>{`Maker Foundation`}</a>{` and will eventually be led by a multitude of formally-elected risk teams and independent, volunteer risk researchers.`}</p>\n    <p>{`A decentralized risk function’s value lies in its ability to protect against biases and at the same time challenge the status quo and make better contributions.`}</p>\n    <h3>{`Forming a Decentralized Risk Management Function`}</h3>\n    <p>{`The community envisions a point where the community can rigorously debate a potential risk construct applicable to the system to reach scientific consensus on what is considered the best overall risk construct for the system.`}</p>\n    <p>{`Risk teams will be able to challenge the current construct in place by way of introducing a new construct for consideration.`}</p>\n    <p>{`If accepted, the construct will receive an initial weighting that will determine how that construct will contribute to the overall risk function.`}</p>\n    <p>{`Data should be explicitly defined and may be either exogenous or endogenous to the construct. Exogenous data may be price data or qualitative data obtained outside of the construct, where endogenous data is calculated data from within the system and again used as an input for the system.`}</p>\n    <p>{`Consensus on the construct implies agreement on all processes and production, including the data obtained, the source of the data, and any data transformations that may occur within the construct.`}</p>\n    <h3>{`Risk Teams and Their Contributions`}</h3>\n    <p>{`As MakerDAO's risk function becomes more decentralized, the risk teams approved by Maker token holders will propose risk constructs to be included in the Maker Protocol.`}</p>\n    <p>{`The output of these constructs will include assessments and risk parameteres for the system.`}</p>\n    <p>{`Risk constructs may eventually include diagnostic risk management models for the entire collateral portfolio. Consequently, we can see how a collection of risk constructs could ultimately cover every aspect of the risk management function.`}</p>\n    <h3>{`Outline of the Governance Mechanism`}</h3>\n    <p>{`Maker token holders will eventually manage the risk function of the system using its voting mechanism.`}</p>\n    <p>{`The governance mechanism has two functions: `}</p>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><strong parentName=\"p\">{`Proactive Governance`}</strong>{` includes debate, resolution and automated implementation.`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><strong parentName=\"p\">{`Reactive Governance`}</strong>{` includes procedural intervention.`}</p>\n      </li>\n    </ul>\n    <p>{`An example of proactive governance is the process of accepting a new token as collateral and deploying the risk parameters associated with it.`}</p>\n    <p>{`An example of reactive governance is increasing or decreasing exposure to a form of collateral due to increases or decreases in liquidity.`}</p>\n    <h3>{`Voting`}</h3>\n    <p>{`Voting takes two forms:`}</p>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><strong parentName=\"p\">{`Governance Polls`}</strong>{` provide resolution on a matter or collection of matters. An example would be the inclusion of new oracles or a new risk team.`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><strong parentName=\"p\">{`Executive Votes`}</strong>{` change the state of the system. An example would be to vote in risk parameters for a newly accepted collateral type.`}</p>\n      </li>\n    </ul>\n    <h4>{`Timing of Proactive Governance Votes`}</h4>\n    <p>{`There will be three subtypes of votes. Once-off or initialization votes, intermittent votes, and regular votes.`}</p>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><strong parentName=\"p\">{`Once-off`}</strong>{` or `}<strong parentName=\"p\">{`initialization votes`}</strong>{` start the process for something. In this instance voting for the first risk construct, which explained next, is a good example. The risk management function initially will be represented by the internal team whose purpose will be to create a construct and template for future teams. Thus an initial vote will be required to get this process started.`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><strong parentName=\"p\">{`Intermittent votes`}</strong>{` will be irregular and generally will not be expected to have much of a pattern. Voting in new Oracles is a good example; Oracles are not regularly included in the system and thus would fall under this type of vote.`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><strong parentName=\"p\">{`Regular votes`}</strong>{` will be votes for matters that are expected. Implementing new collateral risk parameters will be expected to be something that will continually be on the voting roster for Maker token holders. With the expectation of being held quarterly.`}</p>\n      </li>\n    </ul>\n    <h4>{`Timing of Reactive Governance Actions`}</h4>\n    <p>{`The need for reactive governance actions will change as risk constructs are added to the Maker Protocol and changed over time.`}</p>\n    <p>{`These actions relate to the performance of a function, such as an oracle. If an oracle needs to be excluded from the system for some reason, a reactive action needs to be implemented to remove the oracle.`}</p>\n    <h4>{`Voting in New Collateral Types`}</h4>\n    <p>{`The first step is a qualitative assessment of the token under consideration performed by a risk team or independent risk researcher and proposed to Maker token holders. `}</p>\n    <p>{`Maker token holders use Governance Votes to accept or reject the output of the due diligence proposal and if accepted, the community then records that the token is slated to be included as collateral token in the next Executive Vote. `}</p>\n    <p>{`The Governance Vote can occur at any time during the quarter before the Executive Vote. Every time a new collateral type passes a Governance vote, we add the risk parameters to the roster for the next Executive vote. `}</p>\n    <p>{`Every quarter the collection of risk parameters will be voted into the system by way of the Executive vote, meaning the necessary code will be deployed to the system to update fields and thus the state of the system.`}</p>\n    <p>{`Collateral will change its nature over time and as such if the collateral accepted declines or improves in quality reactive governance actions will be used to adjust the necessary parts of the system. These adjustments are implemented intermittently but congruent with the approved collection of risk constructs in place.`}</p>\n    <h2>{`Risk Management for Maker Token Holders`}</h2>\n    <p>{`Maker holders have to discuss the merits of each proposal and, if satisfied, vote in the appropriate Governance Polls and Executive Votes.`}</p>\n    <Button to=\"/learn/governance/gov-risk-framework2/\" mdxType=\"Button\">Risk in Maker</Button>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      ","/** @jsx jsx */\nimport {Children, Fragment} from 'react';\nimport { Box, Flex, jsx } from \"theme-ui\";\nimport Sticky from \"react-sticky-el\";\nimport { useStaticQuery, graphql } from \"gatsby\";\nimport { useLocation } from \"@reach/router\";\n\nimport {MobileNav} from '@modules/navigation';\nimport { useTranslation } from \"@modules/localization/\";\nimport { LanguageSelector } from \"@modules/localization\";\nimport { Sidenav, Breadcrumbs } from \"@modules/navigation\";\nimport { StatusBanner } from \"@modules/ui\";\nimport calculateTreeData from \"@modules/navigation/calculateTreeData\";\nimport { SEO } from \"@modules/utility\";\nimport { UrlConverter, getLocaleFromPath } from \"@utils\";\n\nexport default (props) => {\n  const { locale, t, DEFAULT_LOCALE } = useTranslation();\n\n  const { allMdx } = useStaticQuery(graphql`\n    query getMDXData {\n      # Regex for all files that are NOT config files\n      allMdx(\n        filter: {\n          fileAbsolutePath: {\n            regex: \"//([\\\\\\\\w]{2})/(?!header.mdx|index.mdx|sidenav.mdx|example.mdx|social.mdx|footer.mdx|404.mdx|.js|.json)/\"\n          }\n        }\n      ) {\n        edges {\n          node {\n            headings(depth: h1) {\n              value\n            }\n            fileAbsolutePath\n            frontmatter {\n              title\n              order\n            }\n          }\n        }\n      }\n    }\n  `);\n\n  const { children, pageContext, uri } = props;\n\n  const {pagePath} = pageContext; \n  const {\n    title,\n    description,\n    keywords,\n    featuredImage,\n    status,\n    hideLanguageSelector,\n    hideBreadcrumbs,\n  } = pageContext.frontmatter;\n\n  const pathDirs = pagePath.replace(/^\\/|\\/$/g, \"\").split(\"/\").slice(1);\n  const urlNoLocale = pathDirs.join(\"/\");\n  \n  const { sidenavData, breadcrumbData } = calculateTreeData(\n    allMdx.edges,\n    pathDirs[0],\n    DEFAULT_LOCALE,\n    locale,\n    pathDirs\n  );\n\n  //NOTE(Rejon): Must be in the shape that React Select expects for it's options.\n  //Something that can be queried? \n  const languageSelectorData = allMdx.edges\n    .filter(({ node }) => {\n      //Drop the end slash, remove the locale, compare the string\n      //TODO(Rejon): This works for now, but can probably be optimized with a Regex solution.\n      const nodeURL = UrlConverter(node)\n        .replace(/^\\/|\\/$/g, \"\")\n        .split(\"/\")\n        .slice(1)\n        .join(\"/\");\n\n      return (\n        nodeURL === urlNoLocale &&\n        getLocaleFromPath(node.fileAbsolutePath) !== locale\n      );\n    })\n    .map(({ node }) => ({\n      value: UrlConverter(node),\n      label: t(\n        \"Language\",\n        null,\n        null,\n        getLocaleFromPath(node.fileAbsolutePath)\n      ),\n    }));\n\n  const statusProps =\n    typeof status === \"object\"\n      ? { children: status.text, ...status }\n      : { children: status };\n\n  const { pathname } = useLocation();\n  const path = pathname.split(\"/\");\n  const currentTopSection = path[2];\n\n  //For the sake of SEO we may want the page title to be based on the first h1 in our MDX file.\n  //if no title is specified in the metadata.\n  const getFirstHeading = () => {\n    //NOTE(Rejon): The children of layouts provided are MDX components!\n    //Find the first mdx child that's an H1\n    const firstHeading = Children.toArray(children).find(\n      (c) => c.props.mdxType === \"h1\"\n    );\n\n    //If we have an h1 in our file return it.\n    if (firstHeading !== undefined) {\n      return firstHeading.props.children;\n    }\n\n    return undefined;\n  };\n\n  //SEO page title priority is: frontmatter title -> First H1 in mdx -> Filename fallback from uri\n  //NOTE(Rejon): If the page is an index of a directory, the uri split will be the name of the directory. ie. /en/bounties -> bounties\n  const _pageTitle = title || getFirstHeading() || uri.split(\"/\").pop();\n\n  const hasTopSection =\n    currentTopSection !== undefined && currentTopSection !== \"\";\n\n  const renderSidenav = pageContext.frontmatter && !pageContext.frontmatter.hideSidenav && hasTopSection;\n  const renderLanguageSelector = hasTopSection && !hideLanguageSelector;\n  const renderBreadcrumbs = (!hideBreadcrumbs || (hasTopSection && !hideLanguageSelector));\n\n  const seo = {\n    title: _pageTitle,\n    description,\n    keywords,\n    featuredImage,\n  };\n\n  let contentWidthSubtract = renderLanguageSelector ? 234 : 0; //NOTE(Rejon): Based on word from design, language selector being hidden doesn't change content width.\n\n  if (renderSidenav) {\n    contentWidthSubtract += 256;\n  }\n\n\n  return (\n    <Fragment>\n      {renderSidenav\n          &&\n          <Box\n            sx={{\n              width: \"256px\",\n              display: [\"none\", \"none\", \"initial\"],\n            }}\n          >\n          <Sticky\n            boundaryElement=\".content-boundary\"\n            dontUpdateHolderHeightWhenSticky={true}\n            style={{ position: \"relative\" }}\n            hideOnBoundaryHit={false}\n            sx={{display: [\"none\", \"none\", \"initial\"]}}\n          >\n            <Sidenav data={sidenavData} currentPath={pagePath}/>\n          </Sticky>\n        </Box>\n      }\n      <Box as=\"article\" sx={{\n        width: ['100%', '100%', `calc(100% - ${contentWidthSubtract}px)`],\n        mt: hasTopSection ? [4, 4, \"59px\"] : 0,\n        pl: hasTopSection ? [4, 4, \"64px\"] : 0,\n        pr: hasTopSection ? [4, 4, 0] : 0,\n        pb: 4,\n        \n      }}>\n      <SEO {...seo} />\n      \n      {status && (\n        <Box sx={{ marginTop: hasTopSection ? 2 : 0 }}>\n          <StatusBanner sticky {...statusProps} sx={{ width: \"100%\" }} />\n        </Box>\n      )}\n      {renderBreadcrumbs && \n        <Flex\n          sx={{\n            justifyContent: \"space-between\",\n            position: \"relative\",\n            alignItems: \"flex-start\",\n            flexWrap: [\"wrap\", \"wrap\", \"unset\"],\n            px: !hasTopSection ? [3, 3, 0] : 0,\n          }}\n        >\n          <Breadcrumbs data={breadcrumbData} pathDirs={pathDirs}/>\n        </Flex>\n      }\n      <Box sx={{display: ['block', 'block', 'none']}}>\n        {/* MOBILE LANGUAGE SELECTOR */}\n        {renderLanguageSelector && <LanguageSelector data={languageSelectorData} pagePath={pagePath}/>}\n      </Box>\n      <Box>\n        {children}\n      </Box>\n      </Box>\n      \n      <Box sx={{display: ['none', 'none', 'block']}}>\n        {/* DESKTOP LANGUAGE SELECTOR */}\n        {renderLanguageSelector && <LanguageSelector data={languageSelectorData} pagePath={pagePath}/>}\n      </Box>\n      <MobileNav sidenavData={sidenavData}/>\n    </Fragment>\n  );\n};\n"],"sourceRoot":""}